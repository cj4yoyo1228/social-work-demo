<!doctype html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>æ°¸çºŒå¿—å·¥ï¼šé˜¿æ˜çš„æˆé•·æ•¸æ“šé£›è¼ª</title>

    <!-- Google Fontsï¼šè¼‰å…¥ Noto Sans TC ç¹é«”ä¸­æ–‡å­—å‹ -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700;900&display=swap"
      rel="stylesheet"
    />

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- React 18 CDN -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <!-- Babel Standaloneï¼šè®“ç€è¦½å™¨èƒ½ç›´æ¥è·‘ JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Tailwind è‡ªè¨‚è¨­å®šï¼šå­—å‹æ”¹ç”¨ Noto Sans TC -->
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ['"Noto Sans TC"', "sans-serif"],
            },
          },
        },
      };
    </script>

    <style>
      /* === é é¢åŸºç¤æ¨£å¼ === */
      body {
        margin: 0;
        padding: 0;
        background: #f8fafc;
        font-family: "Noto Sans TC", sans-serif;
      }

      /* === CSS Keyframes å‹•ç•«å®šç¾© === */

      /* æ·¡å…¥ */
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      /* å¾ä¸‹æ–¹æ·¡å…¥ä¸Šæ»‘ */
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(24px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* å¾å³å´æ»‘å…¥ */
      @keyframes slideInRight {
        from {
          opacity: 0;
          transform: translateX(40px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      /* è„ˆè¡é–ƒçˆï¼ˆç”¨æ–¼ç•¶å‰é€²åº¦åœ“é»ï¼‰ */
      @keyframes pulse {
        0%,
        100% {
          box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.5);
        }
        50% {
          box-shadow: 0 0 0 8px rgba(59, 130, 246, 0);
        }
      }

      /* ç¸®æ”¾å½ˆå…¥ */
      @keyframes scaleIn {
        from {
          opacity: 0;
          transform: scale(0.8);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }

      /* é€²åº¦æ¢å¡«å……å‹•ç•« */
      @keyframes progressBar {
        from {
          width: 0%;
        }
        to {
          width: 100%;
        }
      }

      /* é›·é”åœ–ç¶»æ”¾å‹•ç•« */
      @keyframes radarBloom {
        from {
          opacity: 0;
          transform: scale(0.3) rotate(-10deg);
        }
        to {
          opacity: 1;
          transform: scale(1) rotate(0deg);
        }
      }

      /* === å‹•ç•«å·¥å…· class === */
      .animate-fade-in {
        animation: fadeIn 0.5s ease-out forwards;
      }

      .animate-fade-in-up {
        animation: fadeInUp 0.7s cubic-bezier(0.22, 1, 0.36, 1) forwards;
        opacity: 0;
      }

      .animate-slide-in-right {
        animation: slideInRight 0.6s cubic-bezier(0.22, 1, 0.36, 1) forwards;
        opacity: 0;
      }

      .animate-pulse-dot {
        animation: pulse 2s ease-in-out infinite;
      }

      .animate-scale-in {
        animation: scaleIn 0.5s cubic-bezier(0.22, 1, 0.36, 1) forwards;
        opacity: 0;
      }

      .animate-progress-bar {
        animation: progressBar 1.2s ease-out forwards;
      }

      .animate-radar-bloom {
        animation: radarBloom 0.8s cubic-bezier(0.22, 1, 0.36, 1) forwards;
        opacity: 0;
      }

      /* === å½ˆè·³åœ“é»å‹•ç•«ï¼ˆAI è½‰è­¯ä¸­ä½¿ç”¨ï¼‰ === */
      @keyframes bounceDot {
        0%,
        80%,
        100% {
          transform: translateY(0);
        }
        40% {
          transform: translateY(-8px);
        }
      }

      .bouncing-dots {
        display: inline-flex;
        gap: 4px;
        align-items: center;
        margin-left: 4px;
      }

      .bouncing-dots span {
        width: 6px;
        height: 6px;
        border-radius: 50%;
        background-color: #3b82f6;
        display: inline-block;
        animation: bounceDot 1.2s ease-in-out infinite;
      }

      .bouncing-dots span:nth-child(2) {
        animation-delay: 0.15s;
      }

      .bouncing-dots span:nth-child(3) {
        animation-delay: 0.3s;
      }

      /* === å°è©±æ³¡æ³¡å°¾å·´ === */
      .chat-bubble-left::before {
        content: "";
        position: absolute;
        left: -6px;
        top: 12px;
        width: 0;
        height: 0;
        border-top: 6px solid transparent;
        border-bottom: 6px solid transparent;
        border-right: 6px solid #3b82f6;
      }

      .chat-bubble-right::before {
        content: "";
        position: absolute;
        right: -6px;
        top: 12px;
        width: 0;
        height: 0;
        border-top: 6px solid transparent;
        border-bottom: 6px solid transparent;
        border-left: 6px solid #f97316;
      }

      /* === éšæ®µè½‰å ´æ•ˆæœ === */
      .stage-enter {
        animation: fadeInUp 0.5s cubic-bezier(0.22, 1, 0.36, 1) forwards;
      }

      .stage-exit {
        opacity: 0;
        transition: opacity 0.3s ease-out;
      }
    </style>
  </head>

  <body>
    <!-- React æ›è¼‰é» -->
    <div id="root"></div>

    <script type="text/babel">
      /* ==========================================
       *  æ°¸çºŒå¿—å·¥ï¼šé˜¿æ˜çš„æˆé•·æ•¸æ“šé£›è¼ª
       *  React 18 + Tailwind CSS + Babel Standalone
       * ========================================== */

      const { useState, useCallback, useEffect, useRef } = React;

      /* ------------------------------------------
       * é¡è‰²å¸¸æ•¸ï¼ˆè‰²å½©ä»£ç¢¼é›†ä¸­ç®¡ç†ï¼‰
       * ------------------------------------------ */
      const COLORS = {
        brandDeep: "#1E40AF", // å“ç‰Œè—ï¼ˆæ·±è‰²ï¼‰
        brandBright: "#3B82F6", // å“ç‰Œè—ï¼ˆäº®è‰²ï¼‰
        warmDeep: "#EA580C", // æš–æ©˜ï¼ˆæ·±è‰²ï¼‰
        warmBright: "#F97316", // æš–æ©˜ï¼ˆäº®è‰²ï¼‰
        titleDark: "#1E293B", // æ·±ç°ï¼ˆæ¨™é¡Œç”¨ï¼‰
        background: "#F8FAFC", // é é¢èƒŒæ™¯
        card: "#FFFFFF", // å¡ç‰‡ç™½
        success: "#10B981", // æˆåŠŸç¶ 
      };

      /* ------------------------------------------
       * é€²åº¦ç«™é»è¨­å®š
       * ------------------------------------------ */
      const STAGES = [
        { id: 1, label: "ç¬¬ä¸€ç«™" },
        { id: 2, label: "ç¬¬äºŒç«™" },
        { id: 3, label: "ç¬¬ä¸‰ç«™" },
      ];

      /* ------------------------------------------
       * è·å ´èƒ½åŠ›è³‡æ–™ï¼ˆå…­é …æŒ‡æ¨™ï¼‰
       * æ¯é …åŒ…å«ï¼šä¼æ¥­å®šç¾© (corpDef) èˆ‡æ°¸é½¡å¯¦ä½œå®šç¾© (ylDef)
       * ------------------------------------------ */
      const SKILLS = [
        {
          id: "communication",
          name: "æºé€šåŠ›",
          icon: "ğŸ’¬",
          corpDef: "æœ‰æ•ˆå‚³éè³‡è¨Šä¸¦é”æˆå…±è­˜ã€‚",
          ylDef: "èƒ½å¼•å°ä¸åŒèƒŒæ™¯çš„å­¸ç«¥é€²è¡Œæƒ…ç·’è¡¨é”èˆ‡è¡çªèª¿è§£ã€‚",
          color: "blue",
        },
        {
          id: "leadership",
          name: "é ˜å°åŠ›",
          icon: "ğŸ¯",
          corpDef: "å¸¶é ˜åœ˜éšŠé”æˆç›®æ¨™ï¼Œæ¿€ç™¼æˆå“¡æ½›èƒ½ã€‚",
          ylDef: "èƒ½åœ¨æ··é½¡ç’°å¢ƒä¸­å®‰æ’å°çµ„ä»»å‹™ä¸¦æ¿€å‹µå­¸ç«¥åƒèˆ‡ã€‚",
          color: "purple",
        },
        {
          id: "problem-solving",
          name: "å•é¡Œè§£æ±º",
          icon: "ğŸ§©",
          corpDef: "åˆ†æå•é¡Œæ ¹å› ä¸¦æå‡ºæœ‰æ•ˆè§£æ±ºæ–¹æ¡ˆã€‚",
          ylDef: "èƒ½å› æ‡‰èª²å ‚çªç™¼ç‹€æ³å³æ™‚èª¿æ•´æ•™å­¸ç­–ç•¥ã€‚",
          color: "green",
        },
        {
          id: "teamwork",
          name: "åœ˜éšŠåˆä½œ",
          icon: "ğŸ¤",
          corpDef: "èˆ‡ä»–äººå”ä½œå®Œæˆå…±åŒç›®æ¨™ã€‚",
          ylDef: "èƒ½èˆ‡ç­å°å¸«ã€å®¶é•·åŠå…¶ä»–å¿—å·¥æœ‰æ•ˆå”èª¿é…åˆã€‚",
          color: "pink",
        },
        {
          id: "resilience",
          name: "éŸŒæ€§",
          icon: "ğŸ’ª",
          corpDef: "é¢å°æŒ«æŠ˜èƒ½å¿«é€Ÿèª¿é©ä¸¦æŒçºŒå‰é€²ã€‚",
          ylDef: "é¢å°å­¸ç«¥æƒ…ç·’çˆ†ç™¼æˆ–æ•™å­¸æŒ«æŠ˜ï¼Œèƒ½èª¿æ•´å¿ƒæ…‹ç¹¼çºŒæŠ•å…¥ã€‚",
          color: "orange",
        },
        {
          id: "empathy",
          name: "åŒç†å¿ƒ",
          icon: "â¤ï¸",
          corpDef: "ç†è§£ä»–äººæ„Ÿå—ä¸¦åšå‡ºé©ç•¶å›æ‡‰ã€‚",
          ylDef: "èƒ½æ„ŸçŸ¥å­¸ç«¥æƒ…ç·’è®ŠåŒ–ï¼Œç”¨é©é½¡çš„æ–¹å¼çµ¦äºˆæ”¯æŒã€‚",
          color: "red",
        },
      ];

      /* ------------------------------------------
       * æ¯å€‹èƒ½åŠ›å°æ‡‰çš„è‰²ç³»ï¼ˆTailwind class ç”¨ï¼‰
       * ------------------------------------------ */
      const SKILL_COLOR_MAP = {
        blue: { bg: "#EFF6FF", border: "#3B82F6", text: "#1E40AF" },
        purple: { bg: "#F5F3FF", border: "#8B5CF6", text: "#6D28D9" },
        green: { bg: "#ECFDF5", border: "#10B981", text: "#047857" },
        pink: { bg: "#FDF2F8", border: "#EC4899", text: "#BE185D" },
        orange: { bg: "#FFF7ED", border: "#F97316", text: "#C2410C" },
        red: { bg: "#FEF2F2", border: "#EF4444", text: "#B91C1C" },
      };

      /* ------------------------------------------
       * TopNav å…ƒä»¶ï¼šé ‚éƒ¨å°è¦½åˆ—
       * - å›ºå®šåœ¨é é¢æœ€ä¸Šæ–¹
       * - åŒ…å«è¿”å›é¦–é é€£çµã€é€²åº¦æŒ‡ç¤ºå™¨ã€æ¨™é¡Œ
       * ------------------------------------------ */
      function TopNav({ currentStage, onStageClick }) {
        return (
          <nav
            className="sticky top-0 z-50 bg-white shadow-sm"
            style={{ borderBottom: "1px solid #E2E8F0" }}
          >
            <div className="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
              {/* å·¦å´ï¼šè¿”å›é¦–é  */}
              <a
                href="index.html"
                className="flex items-center gap-1 text-sm font-medium hover:opacity-70 transition-opacity"
                style={{ color: COLORS.brandBright }}
              >
                <span>â†</span>
                <span>å›åˆ°é¦–é </span>
              </a>

              {/* ä¸­é–“ï¼šé€²åº¦æŒ‡ç¤ºå™¨ */}
              <div className="flex items-center gap-1">
                {STAGES.map((stage, index) => {
                  // åˆ¤æ–·åœ“é»ç‹€æ…‹ï¼šå·²å®Œæˆ / ç•¶å‰ / æœªåˆ°
                  const isCompleted = stage.id < currentStage;
                  const isCurrent = stage.id === currentStage;
                  const isPending = stage.id > currentStage;

                  return (
                    <React.Fragment key={stage.id}>
                      {/* åœ“é»å’Œæ¨™ç±¤çš„å®¹å™¨ */}
                      <div className="flex flex-col items-center">
                        {/* åœ“é»ï¼šå¯é»æ“Šåˆ‡æ›éšæ®µ */}
                        <button
                          onClick={() => onStageClick(stage.id)}
                          className={`
                            w-8 h-8 rounded-full flex items-center justify-center
                            text-xs font-bold transition-all duration-300 cursor-pointer
                            ${isCurrent ? "animate-pulse-dot" : ""}
                          `}
                          style={{
                            backgroundColor:
                              isCurrent || isCompleted
                                ? COLORS.brandBright
                                : "transparent",
                            color:
                              isCurrent || isCompleted ? "#FFFFFF" : "#CBD5E1",
                            border: isPending
                              ? "2px solid #CBD5E1"
                              : `2px solid ${COLORS.brandBright}`,
                          }}
                        >
                          {/* å·²å®Œæˆé¡¯ç¤ºå‹¾å‹¾ï¼Œå…¶é¤˜é¡¯ç¤ºæ•¸å­— */}
                          {isCompleted ? "âœ“" : stage.id}
                        </button>

                        {/* åœ“é»ä¸‹æ–¹çš„ç«™åæ¨™ç±¤ */}
                        <span
                          className="text-xs mt-1 whitespace-nowrap"
                          style={{
                            color: isCurrent
                              ? COLORS.brandBright
                              : isCompleted
                                ? COLORS.brandDeep
                                : "#94A3B8",
                            fontWeight: isCurrent ? 600 : 400,
                          }}
                        >
                          {stage.label}
                        </span>
                      </div>

                      {/* åœ“é»ä¹‹é–“çš„é€£æ¥ç·šï¼ˆæœ€å¾Œä¸€å€‹ä¸éœ€è¦ï¼‰ */}
                      {index < STAGES.length - 1 && (
                        <div
                          className="h-0.5 rounded-full transition-all duration-500"
                          style={{
                            width: "40px",
                            backgroundColor:
                              stage.id < currentStage
                                ? COLORS.brandBright
                                : "#E2E8F0",
                            marginBottom: "18px", // å°é½Šåœ“é»ä¸­å¿ƒï¼ˆæ‰£æ‰ä¸‹æ–¹æ¨™ç±¤é«˜åº¦ï¼‰
                          }}
                        />
                      )}
                    </React.Fragment>
                  );
                })}
              </div>

              {/* å³å´ï¼šé é¢æ¨™é¡Œ */}
              <span
                className="text-sm font-semibold hidden sm:block"
                style={{ color: COLORS.titleDark }}
              >
                æ°¸çºŒå¿—å·¥æ•¸æ“šé£›è¼ª
              </span>
            </div>
          </nav>
        );
      }

      /* ------------------------------------------
       * StagePlaceholder å…ƒä»¶ï¼šå„ç«™çš„æš«æ™‚ä½”ä½å…§å®¹
       * ä¹‹å¾Œæœƒæ›¿æ›æˆæ­£å¼çš„å…§å®¹å…ƒä»¶
       * ------------------------------------------ */
      function StagePlaceholder({ stageId, label }) {
        // æ¯ç«™ä¸åŒçš„èƒŒæ™¯æ¼¸å±¤è‰²ï¼Œå¢æ·»è¦–è¦ºå€åˆ†
        const gradients = {
          1: "linear-gradient(135deg, #EFF6FF 0%, #DBEAFE 100%)",
          2: "linear-gradient(135deg, #FFF7ED 0%, #FFEDD5 100%)",
          3: "linear-gradient(135deg, #ECFDF5 0%, #D1FAE5 100%)",
        };

        const icons = {
          1: "ğŸ“‹",
          2: "ğŸ“Š",
          3: "ğŸš€",
        };

        return (
          <div
            className="flex flex-col items-center justify-center stage-enter"
            style={{ minHeight: "calc(100vh - 100px)" }}
          >
            <div
              className="rounded-2xl shadow-lg p-12 text-center max-w-md w-full mx-4"
              style={{ background: gradients[stageId] || gradients[1] }}
            >
              <div className="text-5xl mb-4">{icons[stageId]}</div>
              <h2
                className="text-2xl font-bold mb-2"
                style={{ color: COLORS.titleDark }}
              >
                {label}å…§å®¹
              </h2>
              <p className="text-sm" style={{ color: "#64748B" }}>
                æ­¤å€å¡Šå°‡åœ¨å¾ŒçºŒä»»å‹™ä¸­å¯¦ä½œ
              </p>
            </div>
          </div>
        );
      }

      /* ------------------------------------------
       * Stage1 å…ƒä»¶ï¼šç¬¬ä¸€ç«™ â€” è·å ´æŒ‡æ¨™å°æ¨™
       * - é¡¯ç¤ºå…­å¼µèƒ½åŠ›å¡ç‰‡ï¼ˆ2x3 gridï¼‰
       * - é»æ“Šå¡ç‰‡å±•é–‹ä¼æ¥­å®šç¾© & æ°¸é½¡å¯¦ä½œ
       * - é»éã€Œæºé€šåŠ›ã€å¾Œé¡¯ç¤ºå‰é€²æŒ‰éˆ•
       * ------------------------------------------ */
      function Stage1({ onNext }) {
        // ç›®å‰é¸ä¸­çš„å¡ç‰‡ idï¼ˆnull è¡¨ç¤ºæ²’é¸ï¼‰
        const [selectedSkill, setSelectedSkill] = useState(null);
        // æ˜¯å¦æ›¾é»æ“Šéã€Œæºé€šåŠ›ã€ï¼Œé»éæ‰é¡¯ç¤ºå‰é€²æŒ‰éˆ•
        const [hasTappedComm, setHasTappedComm] = useState(false);

        /**
         * handleCardClickï¼šé»æ“Šå¡ç‰‡çš„è™•ç†
         * - å¦‚æœé»çš„æ˜¯å·²é¸ä¸­çš„å¡ç‰‡ â†’ æ”¶åˆï¼ˆè¨­ç‚º nullï¼‰
         * - å¦å‰‡å±•é–‹è©²å¡ç‰‡
         * - è‹¥é»åˆ°æºé€šåŠ›ï¼Œæ¨™è¨˜ hasTappedComm
         */
        const handleCardClick = useCallback((skillId) => {
          setSelectedSkill((prev) => (prev === skillId ? null : skillId));
          if (skillId === "communication") {
            setHasTappedComm(true);
          }
        }, []);

        return (
          <div className="max-w-3xl mx-auto px-4 py-10 stage-enter">
            {/* æ¨™é¡Œå€åŸŸ */}
            <div className="text-center mb-8">
              <h1
                className="text-3xl md:text-4xl font-bold mb-3"
                style={{ color: COLORS.titleDark }}
              >
                ğŸ¢ æ°¸é½¡è·å ´åŠ›å­—å…¸
              </h1>
              <p className="text-base" style={{ color: "#64748B" }}>
                é»æ“Šä»»ä¸€èƒ½åŠ›ï¼Œçœ‹çœ‹ä¼æ¥­æ€éº¼å®šç¾©ï¼Œæ°¸é½¡æ€éº¼å¯¦è¸
              </p>
            </div>

            {/* 2x3 èƒ½åŠ›å¡ç‰‡ grid */}
            <div className="grid grid-cols-2 md:grid-cols-3 gap-4">
              {SKILLS.map((skill, index) => {
                const isSelected = selectedSkill === skill.id;
                const colors = SKILL_COLOR_MAP[skill.color];

                return (
                  <div
                    key={skill.id}
                    onClick={() => handleCardClick(skill.id)}
                    className="rounded-xl cursor-pointer select-none animate-fade-in-up"
                    style={{
                      /* å‹•ç•«å»¶é²ï¼šå¡ç‰‡é€ä¸€æµ®ç¾ */
                      animationDelay: `${index * 0.08}s`,
                      background: isSelected
                        ? colors.bg
                        : "rgba(255,255,255,0.85)",
                      border: isSelected
                        ? `2px solid ${colors.border}`
                        : "2px solid transparent",
                      boxShadow: isSelected
                        ? `0 4px 20px ${colors.border}33`
                        : "0 1px 4px rgba(0,0,0,0.06)",
                      /* ç”¨ transition åšå¹³æ»‘å±•é–‹/æ”¶åˆ + hover æµ®èµ· */
                      transition: "all 0.3s cubic-bezier(0.22, 1, 0.36, 1)",
                      transform: isSelected
                        ? "translateY(-2px)"
                        : "translateY(0)",
                      padding: "20px",
                    }}
                    onMouseEnter={(e) => {
                      if (!isSelected) {
                        e.currentTarget.style.transform = "translateY(-4px)";
                        e.currentTarget.style.boxShadow =
                          "0 6px 16px rgba(0,0,0,0.1)";
                      }
                    }}
                    onMouseLeave={(e) => {
                      if (!isSelected) {
                        e.currentTarget.style.transform = "translateY(0)";
                        e.currentTarget.style.boxShadow =
                          "0 1px 4px rgba(0,0,0,0.06)";
                      }
                    }}
                  >
                    {/* å¡ç‰‡ä¸Šæ–¹ï¼šåœ–ç¤º + èƒ½åŠ›åç¨± */}
                    <div className="flex items-center gap-2 mb-1">
                      <span className="text-2xl">{skill.icon}</span>
                      <span
                        className="text-base font-semibold"
                        style={{
                          color: isSelected ? colors.text : COLORS.titleDark,
                        }}
                      >
                        {skill.name}
                      </span>
                    </div>

                    {/* å±•é–‹å€åŸŸï¼šä¼æ¥­å®šç¾© + æ°¸é½¡å¯¦ä½œï¼ˆç”¨ max-height åšå¹³æ»‘å±•é–‹ï¼‰ */}
                    <div
                      style={{
                        maxHeight: isSelected ? "200px" : "0px",
                        opacity: isSelected ? 1 : 0,
                        overflow: "hidden",
                        transition:
                          "max-height 0.4s cubic-bezier(0.22, 1, 0.36, 1), opacity 0.3s ease",
                        marginTop: isSelected ? "12px" : "0px",
                      }}
                    >
                      {/* ä¼æ¥­å®šç¾© */}
                      <div className="mb-2">
                        <span
                          className="text-xs font-medium"
                          style={{ color: "#94A3B8" }}
                        >
                          ğŸ¢ ä¼æ¥­å®šç¾©
                        </span>
                        <p
                          className="text-sm mt-1"
                          style={{ color: COLORS.titleDark, lineHeight: "1.6" }}
                        >
                          {skill.corpDef}
                        </p>
                      </div>

                      {/* æ°¸é½¡å¯¦ä½œ */}
                      <div>
                        <span
                          className="text-xs font-medium"
                          style={{ color: "#94A3B8" }}
                        >
                          ğŸŒ± æ°¸é½¡å¯¦ä½œ
                        </span>
                        <p
                          className="text-sm mt-1"
                          style={{ color: COLORS.titleDark, lineHeight: "1.6" }}
                        >
                          {skill.ylDef}
                        </p>
                      </div>
                    </div>
                  </div>
                );
              })}
            </div>

            {/* å‰é€²æŒ‰éˆ•ï¼šé»éæºé€šåŠ›å¾Œæ‰é¡¯ç¤º */}
            {hasTappedComm && (
              <div
                className="flex justify-center mt-10 animate-fade-in-up"
                style={{ animationDelay: "0.1s" }}
              >
                <button
                  onClick={onNext}
                  className="px-8 py-3 rounded-full text-white font-semibold text-base
                             hover:shadow-lg transition-all duration-300 cursor-pointer"
                  style={{
                    background: `linear-gradient(135deg, ${COLORS.brandDeep}, ${COLORS.brandBright})`,
                  }}
                  onMouseEnter={(e) => {
                    e.currentTarget.style.transform = "translateY(-2px)";
                  }}
                  onMouseLeave={(e) => {
                    e.currentTarget.style.transform = "translateY(0)";
                  }}
                >
                  å‰å¾€ç¬¬äºŒç«™ â†’
                </button>
              </div>
            )}
          </div>
        );
      }

      /* ------------------------------------------
       * Stage2 å…ƒä»¶ï¼šç¬¬äºŒç«™ â€” è¡Œç‚ºè½‰è­¯ & AI è¿½å•
       * - å·¦å´ï¼šå¿—å·¥èª²å¾Œæ—¥èªŒ + AI è½‰è­¯çµæœ
       * - å³å´ï¼šAI æˆé•·æ•™ç·´å°è©± + å›ç­”é¸é …
       * - å›ç­”å¾Œè§£é–æˆé•·æŒ‡æ¨™èˆ‡æˆå°±å‹³ç« 
       * ------------------------------------------ */
      function Stage2({ onNext }) {
        // === ç‹€æ…‹ç®¡ç† ===
        const [translating, setTranslating] = useState(false); // AI æ­£åœ¨è½‰è­¯ä¸­
        const [translated, setTranslated] = useState(false); // è½‰è­¯å®Œæˆ
        const [answered, setAnswered] = useState(false); // ä½¿ç”¨è€…å·²å›ç­”
        const [selectedAnswer, setSelectedAnswer] = useState(""); // é¸äº†å“ªå€‹å›ç­”
        const [showGrowth, setShowGrowth] = useState(false); // é¡¯ç¤ºæˆé•·æŒ‡æ¨™
        const [showBadge, setShowBadge] = useState(false); // é¡¯ç¤ºå‹³ç« è§£é–
        const [aiQuestionVisible, setAiQuestionVisible] = useState(false); // AI å•é¡Œæ˜¯å¦å¯è¦‹

        // ç”¨ ref æ”¶é›†æ‰€æœ‰ timeoutï¼Œæ–¹ä¾¿æ¸…ç†é¿å…è¨˜æ†¶é«”æ´©æ¼
        const timersRef = useRef([]);

        // === è‡ªå‹•è§¸ç™¼åºåˆ—ï¼šæ—¥èªŒé¡¯ç¤º â†’ AI è½‰è­¯ â†’ æ¨™ç±¤å‡ºç¾ â†’ AI æå• ===
        useEffect(() => {
          // 500ms å¾Œé–‹å§‹è½‰è­¯å‹•ç•«
          const t1 = setTimeout(() => setTranslating(true), 500);
          // å†é 2000ms è½‰è­¯å®Œæˆ
          const t2 = setTimeout(() => {
            setTranslated(true);
            setTranslating(false);
          }, 2500);
          // å†é 500ms é¡¯ç¤º AI å•é¡Œ
          const t3 = setTimeout(() => setAiQuestionVisible(true), 3000);

          timersRef.current = [t1, t2, t3];

          // æ¸…ç†ï¼šå…ƒä»¶å¸è¼‰æ™‚æ¸…é™¤æ‰€æœ‰ timeout
          return () => {
            timersRef.current.forEach(clearTimeout);
          };
        }, []);

        /**
         * handleAnswerï¼šä½¿ç”¨è€…é»é¸å›ç­”é¸é …
         * è§¸ç™¼å¾ŒçºŒå‹•ç•«ï¼šå›ç­”æ³¡æ³¡ â†’ æˆé•·æŒ‡æ¨™é£›å…¥ â†’ å‹³ç« è§£é–
         */
        const handleAnswer = useCallback((answer) => {
          setSelectedAnswer(answer);
          setAnswered(true);

          // 600ms å¾Œé¡¯ç¤ºæˆé•·æŒ‡æ¨™
          const t4 = setTimeout(() => setShowGrowth(true), 600);
          // 1200ms å¾Œé¡¯ç¤ºå‹³ç« 
          const t5 = setTimeout(() => setShowBadge(true), 1200);

          timersRef.current.push(t4, t5);
        }, []);

        // AI è¿½å•çš„å…©å€‹å›ç­”é¸é …
        const answerOptions = [
          "æˆ‘å…ˆè®“è‡ªå·±å†·éœï¼Œå†æƒ³åˆ¥çš„æ–¹æ³•å¼•å°ä»–å€‘",
          "æˆ‘è«‹å…¶ä»–å¿—å·¥å¹«å¿™åˆ†é–‹ä»–å€‘",
        ];

        // è½‰è­¯çµæœçš„ä¸‰å€‹æ¨™ç±¤
        const translationTags = [
          { label: "âœ… è¡çªè§£æ±º", delay: "0s" },
          { label: "âœ… æƒ…ç·’ç®¡ç†", delay: "0.15s" },
          { label: "âœ… å¼•å°èƒ½åŠ›", delay: "0.3s" },
        ];

        return (
          <div className="max-w-5xl mx-auto px-4 py-8 stage-enter">
            {/* é›™æ¬„å¸ƒå±€ï¼šå·¦å´æ—¥èªŒã€å³å´ AI å°è©± */}
            <div className="flex flex-col lg:flex-row gap-8">
              {/* ====== å·¦å´ï¼šèª²å¾Œæ—¥èªŒå€ ====== */}
              <div className="lg:w-1/2">
                {/* æ¨™é¡Œ */}
                <h2
                  className="text-xl font-bold mb-1"
                  style={{ color: COLORS.titleDark }}
                >
                  ğŸ“ é˜¿æ˜çš„èª²å¾Œæ—¥èªŒ
                </h2>
                <p className="text-sm mb-4" style={{ color: "#94A3B8" }}>
                  ç¬¬ 8 é€± â€” 2026/02/18
                </p>

                {/* æ—¥èªŒå¡ç‰‡ï¼šæš–é»ƒè‰²èƒŒæ™¯ï¼Œæ¨¡æ“¬æ‰‹å¯«æ„Ÿ */}
                <div
                  className="rounded-xl p-6 mb-4"
                  style={{ backgroundColor: "#FFFBEB" }}
                >
                  <p
                    className="text-base leading-relaxed"
                    style={{
                      color: "#78350F",
                      fontWeight: 300,
                      fontStyle: "italic",
                      lineHeight: "1.9",
                    }}
                  >
                    ä»Šå¤©å°æ˜è·Ÿå°å¼·åµæ¶ä¸å¯«åŠŸèª²ï¼Œæˆ‘å¾ˆå¿ƒç´¯ä½†é‚„æ˜¯å…ˆè®“ä»–å€‘å†·éœï¼Œåˆ†é–‹åä¹‹å¾Œè·Ÿä»–å€‘å€‹åˆ¥èŠäº†ä¸€ä¸‹ã€‚å°æ˜å¾Œä¾†æœ‰è·Ÿå°å¼·é“æ­‰ï¼Œé›–ç„¶èŠ±äº†å¾ˆå¤šæ™‚é–“ä½†çœ‹åˆ°ä»–å€‘å’Œå¥½è¦ºå¾—å¾ˆå€¼å¾—ã€‚
                  </p>
                </div>

                {/* è½‰è­¯å€åŸŸ */}
                {translating && (
                  <div
                    className="flex items-center text-sm animate-fade-in"
                    style={{ color: COLORS.brandBright }}
                  >
                    <span>ğŸ”„ AI è½‰è­¯ä¸­</span>
                    <div className="bouncing-dots">
                      <span></span>
                      <span></span>
                      <span></span>
                    </div>
                  </div>
                )}

                {/* è½‰è­¯çµæœï¼šä¸‰å€‹èƒ½åŠ›æ¨™ç±¤ */}
                {translated && (
                  <div className="flex flex-wrap gap-2 animate-fade-in">
                    {translationTags.map((tag) => (
                      <span
                        key={tag.label}
                        className="inline-block px-3 py-1.5 rounded-full text-sm font-medium animate-scale-in"
                        style={{
                          backgroundColor: "#EFF6FF",
                          color: "#1E40AF",
                          animationDelay: tag.delay,
                        }}
                      >
                        {tag.label}
                      </span>
                    ))}
                  </div>
                )}
              </div>

              {/* ====== å³å´ï¼šAI æˆé•·æ•™ç·´å°è©±å€ ====== */}
              <div className="lg:w-1/2">
                {/* æ¨™é¡Œ */}
                <h2
                  className="text-xl font-bold mb-4"
                  style={{ color: COLORS.titleDark }}
                >
                  ğŸ¤– AI æˆé•·æ•™ç·´
                </h2>

                {/* å°è©±å€åŸŸ */}
                <div
                  className="rounded-xl p-6"
                  style={{
                    backgroundColor: "#F8FAFC",
                    minHeight: "320px",
                  }}
                >
                  {/* AI å•é¡Œæ³¡æ³¡ï¼ˆå·¦å°é½Šï¼Œå“ç‰Œè—åº•ç™½å­—ï¼‰ */}
                  {aiQuestionVisible && (
                    <div className="flex justify-start mb-4 animate-fade-in">
                      <div
                        className="relative rounded-2xl px-4 py-3 max-w-xs chat-bubble-left"
                        style={{
                          backgroundColor: COLORS.brandBright,
                          color: "#FFFFFF",
                        }}
                      >
                        <p className="text-sm leading-relaxed">
                          é˜¿æ˜ï¼Œé¢å°é€™ç¨®æŒ«æŠ˜ï¼Œä½ æ˜¯å¦‚ä½•èª¿æ•´ç­–ç•¥çš„ï¼Ÿ
                        </p>
                      </div>
                    </div>
                  )}

                  {/* å›ç­”é¸é …æŒ‰éˆ•ï¼ˆAI å•é¡Œå‡ºç¾å¾Œæ‰é¡¯ç¤ºï¼‰ */}
                  {aiQuestionVisible && !answered && (
                    <div
                      className="flex flex-col gap-2 mt-4 animate-fade-in"
                      style={{ animationDelay: "0.3s" }}
                    >
                      {answerOptions.map((option) => (
                        <button
                          key={option}
                          onClick={() => handleAnswer(option)}
                          className="text-left px-4 py-3 rounded-xl text-sm font-medium
                                     transition-all duration-200 cursor-pointer"
                          style={{
                            border: `1.5px solid ${COLORS.brandBright}`,
                            color: COLORS.brandBright,
                            backgroundColor: "#FFFFFF",
                          }}
                          onMouseEnter={(e) => {
                            e.currentTarget.style.backgroundColor = "#EFF6FF";
                            e.currentTarget.style.transform = "translateX(4px)";
                          }}
                          onMouseLeave={(e) => {
                            e.currentTarget.style.backgroundColor = "#FFFFFF";
                            e.currentTarget.style.transform = "translateX(0)";
                          }}
                        >
                          {option}
                        </button>
                      ))}
                    </div>
                  )}

                  {/* ä½¿ç”¨è€…çš„å›ç­”æ³¡æ³¡ï¼ˆå³å°é½Šï¼Œæš–æ©˜åº•ç™½å­—ï¼‰ */}
                  {answered && (
                    <div className="flex justify-end mb-4 animate-fade-in">
                      <div
                        className="relative rounded-2xl px-4 py-3 max-w-xs chat-bubble-right"
                        style={{
                          backgroundColor: COLORS.warmBright,
                          color: "#FFFFFF",
                        }}
                      >
                        <p className="text-sm leading-relaxed">
                          {selectedAnswer}
                        </p>
                      </div>
                    </div>
                  )}

                  {/* æˆé•·æŒ‡æ¨™å¡ç‰‡ï¼ˆå¾å³å´æ»‘å…¥ï¼‰ */}
                  {showGrowth && (
                    <div
                      className="rounded-xl px-4 py-3 mb-3 animate-slide-in-right"
                      style={{
                        backgroundColor: "#FFF7ED",
                        border: "1px solid #FED7AA",
                      }}
                    >
                      <p
                        className="text-sm font-semibold"
                        style={{ color: "#C2410C" }}
                      >
                        ğŸ“ˆ éŸŒæ€§æŒ‡æ¨™ â†‘ 15%
                      </p>
                    </div>
                  )}

                  {/* æˆå°±å‹³ç« å¡ç‰‡ï¼ˆç¸®æ”¾å½ˆå…¥ + é‡‘è‰²é‚Šæ¡†ï¼‰ */}
                  {showBadge && (
                    <div
                      className="rounded-xl px-4 py-3 animate-scale-in"
                      style={{
                        backgroundColor: "#FFFBEB",
                        border: "2px solid #FCD34D",
                      }}
                    >
                      <p
                        className="text-sm font-semibold"
                        style={{ color: "#92400E" }}
                      >
                        ğŸ… è§£é–æˆå°±ï¼šé€†å¢ƒèª¿é©è€…
                      </p>
                    </div>
                  )}
                </div>
              </div>
            </div>

            {/* åº•éƒ¨å°è¦½ï¼šå›ç­”å¾Œæ‰é¡¯ç¤ºå‰é€²æŒ‰éˆ• */}
            {answered && (
              <div
                className="flex justify-center mt-10 animate-fade-in-up"
                style={{ animationDelay: "0.2s" }}
              >
                <button
                  onClick={onNext}
                  className="px-8 py-3 rounded-full text-white font-semibold text-base
                             hover:shadow-lg transition-all duration-300 cursor-pointer"
                  style={{
                    background: `linear-gradient(135deg, ${COLORS.brandDeep}, ${COLORS.brandBright})`,
                  }}
                  onMouseEnter={(e) => {
                    e.currentTarget.style.transform = "translateY(-2px)";
                  }}
                  onMouseLeave={(e) => {
                    e.currentTarget.style.transform = "translateY(0)";
                  }}
                >
                  å‰å¾€ç¬¬ä¸‰ç«™ â†’
                </button>
              </div>
            )}
          </div>
        );
      }

      /* ------------------------------------------
       * App å…ƒä»¶ï¼šä¸»æ‡‰ç”¨ç¨‹å¼
       * - ç®¡ç†ç•¶å‰ç«™é» (currentStage)
       * - ç®¡ç†è½‰å ´å‹•ç•« (stageTransition)
       * ------------------------------------------ */
      function App() {
        // currentStage: 1~3 ä»£è¡¨ä¸‰å€‹ç«™é»
        const [currentStage, setCurrentStage] = useState(1);
        // stageTransition: true æ™‚è§¸ç™¼æ·¡å‡ºæ•ˆæœ
        const [stageTransition, setStageTransition] = useState(false);

        /**
         * goToStageï¼šåˆ‡æ›ç«™é»çš„å‡½å¼
         * æµç¨‹ï¼šå…ˆæ·¡å‡ºï¼ˆ300msï¼‰â†’ åˆ‡æ›å…§å®¹ â†’ æ·¡å…¥
         */
        const goToStage = useCallback(
          (targetStage) => {
            // å¦‚æœç›®æ¨™å°±æ˜¯ç•¶å‰ç«™ï¼Œä¸åšä»»ä½•äº‹
            if (targetStage === currentStage) return;
            // é™åˆ¶ç¯„åœåœ¨ 1~3
            if (targetStage < 1 || targetStage > 3) return;

            // æ­¥é©Ÿ 1ï¼šè§¸ç™¼æ·¡å‡º
            setStageTransition(true);

            // æ­¥é©Ÿ 2ï¼šç­‰ 300ms å¾Œåˆ‡æ›ç«™é»ä¸¦ç§»é™¤è½‰å ´ç‹€æ…‹
            setTimeout(() => {
              setCurrentStage(targetStage);
              setStageTransition(false);
            }, 300);
          },
          [currentStage],
        );

        // æ‰¾åˆ°ç•¶å‰ç«™é»çš„æ¨™ç±¤æ–‡å­—
        const currentLabel =
          STAGES.find((s) => s.id === currentStage)?.label || "";

        return (
          <div
            className="min-h-screen"
            style={{
              background: COLORS.background,
              fontFamily: '"Noto Sans TC", sans-serif',
            }}
          >
            {/* é ‚éƒ¨å°è¦½åˆ— */}
            <TopNav currentStage={currentStage} onStageClick={goToStage} />

            {/* ä¸»è¦å…§å®¹å€åŸŸï¼ˆæ ¹æ“š currentStage æ¸²æŸ“å°æ‡‰å…ƒä»¶ï¼‰ */}
            <main
              className={`transition-opacity duration-300 ${
                stageTransition ? "opacity-0" : "opacity-100"
              }`}
            >
              {/* ç¬¬ä¸€ç«™ï¼šè·å ´æŒ‡æ¨™å°æ¨™ï¼ˆæ­£å¼å…ƒä»¶ï¼‰ */}
              {currentStage === 1 && <Stage1 onNext={() => goToStage(2)} />}
              {/* ç¬¬äºŒç«™ï¼šè¡Œç‚ºè½‰è­¯ & AI è¿½å•ï¼ˆæ­£å¼å…ƒä»¶ï¼‰ */}
              {currentStage === 2 && <Stage2 onNext={() => goToStage(3)} />}
              {currentStage === 3 && (
                <StagePlaceholder stageId={3} label="ç¬¬ä¸‰ç«™" />
              )}
            </main>
          </div>
        );
      }

      /* ------------------------------------------
       * æ›è¼‰ React App åˆ° DOM
       * ------------------------------------------ */
      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
